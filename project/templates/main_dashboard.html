{% extends "search_tab.html" %}
{% block content %}
<div class="dashboard">
  <div class="frame">
    <div class="board">
      <div class="event-list">
        {% if error_msg != "" %}
          <div class="error">
            <p style="font-size: 50px;">Hmmm...</p>
            <p style="font-size: 30px;">{{ error_msg }}</p>
            <p style="font-size: 25px;">Try a different keyword. To return to main dashboard, click the T-board logo.</p>
          </div>
        {% endif %}
        {% for event in events %}
          {% with event=event %}
            {% include "event.html" %}
          {% endwith %}
        {% endfor %} 
      </div>
    </div>
  </div>
  <div class="sidetab">
    <svg
      class="icon-cog"
      width="50"
      height="50"
      viewBox="0 0 50 50"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
      onclick="toggleSidetab()"
    >
      <path
        d="M21.8828 0L18.7656 7.41895C18.1421 7.60598 17.581 7.91771 17.0199 8.22943L9.601 5.11222L5.11222 9.601L8.22943 17.0199C7.9177 17.6434 7.66833 18.1421 7.41895 18.7656L0 21.8828V28.1172L7.41895 31.2344C7.66833 31.8579 7.9177 32.3566 8.22943 32.98L5.11222 40.399L9.601 44.8878L17.0199 41.7706C17.581 42.0199 18.1421 42.3317 18.7656 42.581L21.8828 50H28.1172L31.2344 42.581C31.7955 42.3317 32.419 42.0823 32.9801 41.7706L40.399 44.8878L44.8878 40.399L41.7706 32.98C42.0199 32.419 42.3317 31.7955 42.581 31.2344L50 28.1172V21.8828L42.581 18.7656C42.394 18.2045 42.0823 17.581 41.7706 17.0199L44.8878 9.601L40.399 5.11222L32.9801 8.22943C32.419 7.98005 31.7955 7.66833 31.2344 7.41895L28.1172 0L21.8828 0ZM25 15.586C30.1746 15.586 34.3516 19.7631 34.3516 24.9377C34.3516 30.1122 30.1746 34.2893 25 34.2893C19.8254 34.2893 15.6484 30.1122 15.6484 24.9377C15.6484 19.7631 19.8254 15.586 25 15.586Z"
        fill="#D9D9D9"
      />
    </svg>
    <div class="sidetab_alt_text" id="sidetab_alt_text">
      <div class="welcome_text">
        Welcome to T-Board,<br>{{ username }}!<br>
      </div>
      <div class="details_text">
        Click the cog for more detailed searches!
      </div>
    </div>
    <form action="/main_dashboard" method="POST" class="sidetab_filters" id="sidetab_filters">
      <div class="show-bookmark">
        <input type="checkbox" id="show-bookmarked" name="show-bookmarked" value="show-bookmarked" class="checkbox" onchange="this.form.submit()" {{ 'checked' if bookmark_checked else '' }}>
        <label for="show-bookmarked" class="show_bookmark_label">Show bookmarked events</label><br>
      </div>
      <div class = "apply_filter">
        {% for event_type in list_of_event_types %}
          <input class="checkbox" type="checkbox" id="filter_{{ event_type }}" name="filter" value="{{ event_type }}" onchange="this.form.submit()"  {{ 'checked' if event_type in event_types_checked else '' }}>
          <label class="show_filter_label" for="filter">{{ event_type }}</label>
        {% endfor %}
      </div>
      <div class="sort">
        <label for="sort-by" class="sort-by">Sort by:</label>
        <select id="sort-by" name="sort-by" class="dropdown" onchange="this.form.submit()">
          <option value="None" {% if sort_by == 'None' %}selected{% endif %}>None</option>
          <option value="asc-alphabetic" {% if sort_by == 'asc-alphabetic' %}selected{% endif %}>A to Z</option>
          <option value="desc-alphabetic" {% if sort_by == 'desc-alphabetic' %}selected{% endif %}>Z to A</option>
          <option value="asc-date" {% if sort_by == 'asc-date' %}selected{% endif %}>Oldest to Newest</option>
          <option value="desc-date" {% if sort_by == 'desc-date' %}selected{% endif %}>Newest to Oldest</option>
        </select>
      </div>
    </form>
  </div>
</div>

<script>
  function toggleSidetab() {
    const form = document.getElementById('sidetab_filters');
    const alt_text = document.getElementById('sidetab_alt_text');
    if (form.style.display === 'none' || form.style.display === '') {
      form.style.display = 'block';
      alt_text.style.display = 'none';
    } else {
      form.style.display = 'none';
      alt_text.style.display = 'block';
    }
  }
</script>


{% include "base_event.html" %}
<style>
.dashboard {
  padding: 0px 25px 0px 25px;
  display: flex;
  flex-direction: row;
  gap: 25px;
  align-items: stretch;
  justify-content: center;
  position: relative;
  width: 100%;
}
.frame {
  background: #786554;
  position: relative;
  padding: 20px 20px 20px 20px;
  overflow: visible;
  width: 1080px;
}
.board {
  background: #d9d9d9;
  position: relative;
  box-shadow: inset 0px 4px 4px 0px rgba(0, 0, 0, 0.25);
  height: 100%;
}
.error {
  font: 400 30px "Ubuntu Condensed", sans-serif;  
  align-self: stretch;
  justify-self: stretch;
}
.sidetab {
  padding: 60px 0px 60px 0px;
  display: fixed;
  flex-direction: column;
  gap: 43px;
  align-items: flex-start;
  justify-content: flex-start;
  align-self: stretch;
  flex-shrink: 0;
  position: relative;
  width: 300px;
  height: 350px;
  background-color: gray;
  border-radius: 10px;
  padding: 20px;
}
.sidetab_alt_text {
  display: block;
  font: 400 25px "Ubuntu Mono", sans-serif;
  color: white;
  line-height: 1.25;
  margin-bottom: 30px;
  text-align: center; /* This will center all text by default */
}
.sidetab_alt_text svg {
  display: inline-block;
  margin-left: 30px;
  align-items: center;
}
.welcome_text {
  margin-top: 30px;
  margin-bottom: 40px; 
}
.details_text {
  text-align: left; 
  position: relative; 
  bottom: -20px; 
}

.sidetab_filters {
  display: none;
}
.show-bookmark {
  display: flex;
  flex-direction: row;
  width: 240px;
  justify-content: space-between;
  align-items: center;
  margin-top: 20px;
  margin-bottom: 20px;
}
.checkbox {
  background: #d9d9d9;
  width: 20px;
  height: 20px;
  position: relative;
}
.show_bookmark_label {
  color: #ffffff;
  text-align: center;
  font: 400 17px "Ubuntu Mono", sans-serif;
  width: 200px;
  position: relative;
  display: inline-flex;
}
.show_filter_label {
  color: white;
  text-align: center;
  font: 400 17px "Ubuntu Mono", sans-serif;
  width: 90px;
  position: relative;
  display: inline-flex;
}
.icon-check {
  position: absolute;
  left: 4px;
  top: 69px;
  overflow: visible;
}
.sort {
  display: flex;
  flex-direction: column;
  margin-bottom: 30px;
  gap: 10px;
}
.dropdown {
  text-align: left;
  font: 400 24px "Ubuntu Mono", sans-serif;
  position: relative;
}
.sort-by {
  color: #ffffff;
  text-align: left;
  font: 400 24px "Ubuntu Mono", sans-serif;
  position: relative;
}
.icon-cog {
  flex-shrink: 0;
  position: relative;
  overflow: visible;
}
.apply_filter {
  color: white;
  text-align: left;
  font: 400 12px "Ubuntu Mono", sans-serif;
  position: relative;
  margin-bottom: 20px;
}
</style>
{% endblock %}