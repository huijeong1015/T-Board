{% extends "my_account.html" %}
{% block tab %}
<div class="friends-tab">
  <div class="frame-tab">
    <div class="my-events-tab">
      <a href="{{ url_for('my_account_myevents', username=username) }}"> 
        <svg class="svg-tab" fill="none" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><g stroke="#3C3C3C" stroke-width="2"><path d="m5.08069 15.2964c-1.21828.7371-4.412515 2.2422-2.46701 4.1256.95036.92 2.00883 1.578 3.33957 1.578h7.59355c1.3307 0 2.3892-.658 3.3395-1.578 1.9455-1.8834-1.2487-3.3885-2.467-4.1256-2.8568-1.7285-6.48178-1.7285-9.33861 0z" stroke-linecap="round" stroke-linejoin="round"/><path d="m13.5 7c0 2.20914-1.7909 4-4 4-2.20914 0-4-1.79086-4-4s1.79086-4 4-4c2.2091 0 4 1.79086 4 4z"/><g stroke-linecap="round" stroke-linejoin="round"><path d="m17 5h5"/><path d="m17 8h5"/><path d="m20 11h2"/></g></g></svg>
        </a>
    </div>
    <div class="event-history-tab">
      <a href="{{ url_for('my_account_event_history', username=username) }}">
        <svg class="svg-tab" fill="none" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><g stroke="#3C3C3C" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="m5.04798 8.60657-2.51014-.15281c1.79928-4.74899 6.96516-7.453846 12.00176-6.10902 5.3644 1.43237 8.5508 6.91633 7.1169 12.24876-1.4338 5.3325-6.9449 8.4941-12.3093 7.0618-3.98301-1.0636-6.76528-4.3607-7.3472-8.1709"/><path d="m12 8v4l2 2"/></g></svg>
      </a>
    </div>
    <div class="friends-tab2">
      <svg class="svg-tab" fill="none" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><g stroke="#EE6192" stroke-width="2"><path d="m5.18007 15.2964c-1.25758.7371-4.554857 2.2422-2.54659 4.1256.98102.92 2.07362 1.578 3.44729 1.578h7.83843c1.3737 0 2.4663-.658 3.4473-1.578 2.0083-1.8834-1.289-3.3885-2.5466-4.1256-2.949-1.7285-6.69084-1.7285-9.63983 0z" stroke-linecap="round" stroke-linejoin="round"/><path d="m14 7c0 2.20914-1.7909 4-4 4-2.20914 0-4-1.79086-4-4s1.79086-4 4-4c2.2091 0 4 1.79086 4 4z"/><path d="m16.7612 3.27615c.8045-.45692 1.5067-.27279 1.9285.02052.1729.12026.2594.18039.3103.18039s.1374-.06013.3103-.18039c.4218-.29331 1.124-.47744 1.9285-.02052 1.0558.59967 1.2947 2.57798-1.1407 4.247-.4638.3179-.6957.47685-1.0981.47685s-.6343-.15895-1.0981-.47685c-2.4354-1.66902-2.1965-3.64733-1.1407-4.247z" stroke-linecap="round"/></g></svg>
    </div>
    {% if session['username'] == username %}
    <div class="notification-tab">
      <a href="{{ url_for('my_account_notification') }}"> 
        <svg class="svg-tab" fill="none" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><g stroke="#3C3C3C" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="m2.52992 14.7696c-.21265 1.394.73808 2.3616 1.90213 2.8438 4.46276 1.8488 10.67315 1.8488 15.13585 0 1.1641-.4822 2.1148-1.4498 1.9022-2.8438-.1307-.8567-.7769-1.5701-1.2557-2.2667-.6271-.9236-.6894-1.9311-.6895-3.0029 0-4.14214-3.369-7.5-7.5249-7.5-4.15587 0-7.52487 3.35786-7.52487 7.5-.0001 1.0718-.06241 2.0793-.68952 3.0029-.47877.6966-1.125 1.41-1.25569 2.2667z"/><path d="m8 19c.45849 1.7252 2.0755 3 4 3s3.5415-1.2748 4-3"/></g></svg>
      </a>
    </div>
    <div class="settings-tab">
      <a href="{{ url_for('my_account_settings') }}"> 
        <svg class="svg-tab" fill="none" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><g stroke="#3C3C3C" stroke-width="2"><path d="m15.5 12c0 1.933-1.567 3.5-3.5 3.5s-3.5-1.567-3.5-3.5 1.567-3.5 3.5-3.5 3.5 1.567 3.5 3.5z"/><path d="m21.011 14.0965c.5219-.1407.7829-.2111.8859-.3457.1031-.1345.1031-.351.1031-.7839v-1.9337c0-.4329 0-.6494-.1031-.7839-.1031-.1346-.364-.205-.8859-.34572-1.9504-.52599-3.1711-2.56507-2.6677-4.50271.1384-.53288.2076-.79931.1415-.95558s-.2557-.26395-.6351-.47933l-1.7247-.97923c-.3722-.21134-.5583-.31701-.7253-.29451-.1671.0225-.3555.21051-.7325.58651-1.4592 1.45575-3.8736 1.45569-5.33286-.00009-.37691-.37601-.56536-.56401-.73241-.58652-.16704-.0225-.35316.08317-.7254.29451l-1.72469.97924c-.37931.21536-.56897.32304-.63506.47928-.0661.15625.00309.42272.14147.95565.50312 1.9377-.71853 3.97683-2.66923 4.5028-.5219.1407-.78285.2111-.88594.3456-.10308.1346-.10308.3511-.10308.784v1.9337c0 .4329 0 .6494.10308.7839.10307.1346.36403.205.88594.3457 1.95038.526 3.17106 2.5651 2.6677 4.5027-.13843.5329-.20765.7993-.14156.9556.0661.1563.25576.264.63509.4793l1.7247.9793c.37226.2113.55839.317.72545.2945s.35548-.2106.73231-.5866c1.45999-1.4569 3.87609-1.457 5.33619-.0001.3768.3761.5652.5641.7323.5866.167.0225.3532-.0832.7254-.2945l1.7247-.9793c.3794-.2153.5691-.323.6351-.4793.0661-.1563-.0031-.4227-.1416-.9556-.5036-1.9375.7161-3.9765 2.6662-4.5026z" stroke-linecap="round"/></g></svg>
      </a>
    </div>    
    {% endif %}
  </div>
  <div class="frame-content">
    <div class="frame-top">
      {% if session['username'] == username %}
        <div class="search-friend">
          <form method="POST" action="{{ url_for('add_friend_via_form') }}" class="search-friend-form">
            <input type="text" name="friend_username" id="input-search-friend" placeholder="Enter username to add a friend" required>
            <button type="submit" class="btn-add-friend">
              <svg class="svg-add-friend" fill="none" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><g stroke="#141b34" stroke-width="1.5"><path d="m12.5 22h-5.90913c-1.54538 0-2.77456-.752-3.87821-1.8034-2.259295-2.1525 1.45014-3.8726 2.86491-4.715 2.1008-1.2509 4.55923-1.7097 6.92243-1.3764.8575.1209 1.6926.3462 2.5.6757" stroke-linecap="round" stroke-linejoin="round"/><path d="m16.5 6.5c0 2.48528-2.0147 4.5-4.5 4.5-2.48528 0-4.5-2.01472-4.5-4.5s2.01472-4.5 4.5-4.5c2.4853 0 4.5 2.01472 4.5 4.5z"/><path d="m18.5 22v-7m-3.5 3.5h7" stroke-linecap="round"/></g></svg>
            </button>
          </form>
        </div>
      {% endif %}
    </div>
    <div class="friends-list">
      {% if friends %}  
        {% for friend in friends %}
        <div class="friend-item">
          <div class="account-wrapper">
            {% if friend.profile_picture.lower() == "default" %}
            <!-- Default profile picture -->
            <svg class="account" width="80" height="80" viewBox="0 0 80 80" fill="none" xmlns="http://www.w3.org/2000/svg">
              <circle cx="40" cy="40" r="38" fill="#657895" />
            </svg>
            {% else %}
            <!-- Custom profile picture -->
            <svg class="account" width="80" height="80" viewBox="0 0 80 80" fill="none" xmlns="http://www.w3.org/2000/svg">
              <defs>
                <clipPath id="circleView{{ loop.index }}">
                  <circle cx="40" cy="40" r="38"/>
                </clipPath>
              </defs>
              <image href="{{ url_for('static', filename='profile_picture/' + friend.profile_picture.lower() + '.png') }}" width="80" height="80" clip-path="url(#circleView{{ loop.index }})" />
              <circle cx="40" cy="40" r="38" fill="none" stroke="#7CA34A" stroke-width="3"/>
            </svg>
            {% endif %}
          </div>
          <div class="friend-details">
            <a href="{{ url_for('my_account_myevents', username=friend.username) }}" class="profile-link">{{ friend.username }}</a>
            <!-- Delete friend button -->
            {% if session['username'] == username %}
              <form action="{{ url_for('remove_friend', username=friend.username) }}" method="post" class="remove-friend-form">
                <button type="submit" class="btn-remove-friend">
                  <svg class="svg-remove-friend" fill="none" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><g stroke="#141b34" stroke-width="1.5"><path d="m12.5 22h-5.90913c-1.54538 0-2.77456-.752-3.87821-1.8034-2.259295-2.1525 1.45014-3.8726 2.86491-4.715 2.1008-1.2509 4.55923-1.7097 6.92243-1.3764.8575.1209 1.6926.3462 2.5.6757" stroke-linecap="round" stroke-linejoin="round"/><path d="m16.5 6.5c0 2.48528-2.0147 4.5-4.5 4.5-2.48528 0-4.5-2.01472-4.5-4.5s2.01472-4.5 4.5-4.5c2.4853 0 4.5 2.01472 4.5 4.5z"/><path d="m15 18.5h7" stroke-linecap="round"/></g></svg>
                </button>
              </form>
            {% endif %}
          </div>
        </div>
        {% endfor %}
      {% else %}
      <div class="no-friends">
        You have no friends added.
      </div>
      {% endif %}
  </div>
  
    <div class="name-top">
      <h2 class="heading">Recommended Friends</h2>
      {% if recommended_friends %}  
      <div class="friends-list">
        {% for friend in recommended_friends %}
          <div class="friend-item">
            <div class="account-wrapper">
              {% if friend.profile_picture.lower() == "default" %}
              <svg
                class="account"
                width="80"
                height="80"
                viewBox="0 0 80 80"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <circle cx="40" cy="40" r="38" fill="#657895" />
              </svg>
              {% else %}
              <svg
                class="account"
                width="80"
                height="80"
                viewBox="0 0 80 80"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <defs>
                  <clipPath id="circleView{{ loop.index }}">
                    <circle cx="40" cy="40" r="38"/>
                  </clipPath>
                </defs>
                <image
                  href="{{ url_for('static', filename='profile_picture/' + friend.profile_picture.lower() + '.png') }}"
                  width="80"
                  height="80"
                  clip-path="url(#circleView{{ loop.index }})"
                />
                <circle
                  cx="40"
                  cy="40"
                  r="38"
                  fill="none"
                  stroke="#7CA34A"
                  stroke-width="3"
                />
              </svg>
              {% endif %}
            </div>
            <div class="friend-details">
              <div class="name">{{ friend.username }}</div>
              <form action="{{ url_for('add_friend', username=friend.username) }}" method="post" class="add-friend-form">
                <input type="hidden" name="friend_username" value="{{ friend.username }}">
                {% if session['username'] == username %}
                  <button type="submit" class="btn-add-friend">
                    <svg class="svg-add-friend" fill="none" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><g stroke="#141b34" stroke-width="1.5"><path d="m12.5 22h-5.90913c-1.54538 0-2.77456-.752-3.87821-1.8034-2.259295-2.1525 1.45014-3.8726 2.86491-4.715 2.1008-1.2509 4.55923-1.7097 6.92243-1.3764.8575.1209 1.6926.3462 2.5.6757" stroke-linecap="round" stroke-linejoin="round"/><path d="m16.5 6.5c0 2.48528-2.0147 4.5-4.5 4.5-2.48528 0-4.5-2.01472-4.5-4.5s2.01472-4.5 4.5-4.5c2.4853 0 4.5 2.01472 4.5 4.5z"/><path d="m18.5 22v-7m-3.5 3.5h7" stroke-linecap="round"/></g></svg>
                  </button>
                {% endif %}
              </form>
            </div>
          </div>
        {% endfor %}
      </div>
    {% else %}
      <div class="no-recommendations">
        No friend recommendations available
      </div>
    {% endif %}
  </div>
</div>
<style>
.friends-tab {
  width: 100%;
  height: 100%;
}
.frame-tab {
  display: flex;
  flex-direction: row;
  padding-right: 15px;
  gap: 20px;
  align-items: flex-start;
  justify-content: flex-end;
  position: relative;
  height: fit-content;
}
.my-events-tab {
  background: #657895;
  border-radius: 10px;
  width: 92px;
  height: 92px;
  display: flex;
  justify-content: center;
  align-items: flex-start;
  padding-top: 15px;
  position: relative;
}
.event-history-tab {
  background: #657895;
  border-radius: 10px;
  width: 92px;
  height: 92px;
  display: flex;
  justify-content: center;
  align-items: flex-start;
  padding-top: 15px;
  position: relative;
}
.friends-tab2 {
  background: #a2b7ca;
  border-radius: 10px;
  width: 92px;
  height: 92px;
  display: flex;
  justify-content: center;
  align-items: flex-start;
  padding-top: 15px;
  position: relative;
}
.notification-tab {
  background: #657895;
  border-radius: 10px;
  width: 92px;
  height: 92px;
  display: flex;
  justify-content: center;
  align-items: flex-start;
  padding-top: 15px;
  position: relative;
}
.settings-tab {
  background: #657895;
  border-radius: 10px;
  width: 92px;
  height: 92px;
  display: flex;
  justify-content: center;
  align-items: flex-start;
  padding-top: 15px;
  position: relative;
}
.frame-top {
  display: flex;
  flex-direction: row;
  align-items: center;
  justify-content: center;
  align-self: stretch;
  flex-shrink: 1;
  position: relative;
  gap: 30px;
}
.search-friend {
  background: #ebebeb;
  border-radius: 15px;
  display: flex;
  flex-direction: row;
  align-items: center;
  flex-shrink: 1;
  width: 100%;
  height: fit-content;
  position: relative;
  box-shadow: inset 0px 4px 4px 0px rgba(0, 0, 0, 0.15);
  gap: 10px;
  padding: 5px 10px 5px 10px;
}
.friend-details {
  display: flex;
  flex-direction: row;
  gap: 30px;
  align-items: center;
}
.remove-friend-form {
  display: flex;
  flex-direction: row;
  width: fit-content;
  height: fit-content;
  margin: 0%;
  align-items: center;
  justify-content: center;
} 
.add-friend-form {
  display: flex;
  flex-direction: row;
  width: fit-content;
  height: fit-content;
  margin: 0%;
  align-items: center;
  justify-content: center;
} 
.search-friend-form {
  display: flex;
  flex-direction: row;
  width: 100%;
  height: 45px;
  margin: 0%;
  align-items: center;
  justify-content: center;
} 
.btn-remove-friend {
  background-color: transparent;
  border: transparent;
  width: fit-content;
  height: fit-content;
  padding: 0%;
}  
.btn-add-friend {
  background-color: transparent;
  border: transparent;
  width: fit-content;
  height: fit-content;
  padding: 0%;
}    
.svg-remove-friend {
  width: 35px;
  height: 35px;
}
.svg-add-friend {
  width: 35px;
  height: 35px;
}
#input-search-friend {
  background-color: transparent;
  border: transparent;
  outline: transparent;
  width: 100%;
  height: 100%;
  position: relative;
  font: 400 25px "Ubuntu Condensed", sans-serif;    
}
.friend {
  padding: 0px 30px 0px 30px;
  display: flex;
  flex-direction: row;
  gap: 30px;
  align-items: center;
  justify-content: flex-start;
  align-self: stretch;
  flex-shrink: 0;
  position: relative;
}
.profile-link {
  color: #000000;
  text-align: left;
  font: 400 30px "Ubuntu Condensed", sans-serif;
  position: relative;
}
.friend-item {
  display: flex; /* Enables flexbox */
  align-items: center; /* Centers the items vertically */
  margin-bottom: 10px; /* Adds space between each friend entry */
}
.friend-item .account-wrapper {
  margin-right: 10px; /* Adds some space between the picture and the username */
}
.friends-list {
  display: flex;
  flex-direction: column; 
  align-items: flex-start; /* Aligns items to the start of the flex container (left side) */
}
.no-friends {
  color: #000000;
  text-align: left;
  font: 400 28px "Ubuntu Condensed", sans-serif;
  position: relative;
}
.no-recommendations {
  color: #000000;
  text-align: left;
  font: 400 28px "Ubuntu Condensed", sans-serif;
  position: relative;
}
.name-top {
  color: #000000;
  text-align: left;
  font: 400 30px "Ubuntu Condensed", sans-serif;
  position: relative;
  width: 100%; 
  border-top: 2px solid #657895; 
}
.heading {
  color: #000000;
  text-align: left;
  font: 700 35px "Ubuntu Mono", sans-serif;
  position: relative;
  padding-top: 20px;
  padding-bottom: 20px;
}

</style>
{% endblock %}