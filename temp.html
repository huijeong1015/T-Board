{% extends "search_tab.html" %}
{% block content %}
<div class="dashboard">
  <div class="frame">
    <div class="board">
      <div class="event-list">
        {% if error_msg != "" %}
          <div class="error">
            <p style="font-size: 50px;">Hmmm...</p>
            <p style="font-size: 30px;">{{ error_msg }}</p>
            <p style="font-size: 25px;">Try a different keyword. To return to main dashboard, click the T-board logo.</p>
          </div>
        {% endif %}
        {% for event in events %}
          {% with event=event %}
            {% include "event.html" %}
          {% endwith %}
        {% endfor %} 
      </div>
    </div>
  </div>
  <div class="sidetab">
    <svg
      class="icon-cog"
      width="50"
      height="50"
      viewBox="0 0 50 50"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
      onclick="toggleSidetab()"
    >
      <path
        d="M21.8828 0L18.7656 7.41895C18.1421 7.60598 17.581 7.91771 17.0199 8.22943L9.601 5.11222L5.11222 9.601L8.22943 17.0199C7.9177 17.6434 7.66833 18.1421 7.41895 18.7656L0 21.8828V28.1172L7.41895 31.2344C7.66833 31.8579 7.9177 32.3566 8.22943 32.98L5.11222 40.399L9.601 44.8878L17.0199 41.7706C17.581 42.0199 18.1421 42.3317 18.7656 42.581L21.8828 50H28.1172L31.2344 42.581C31.7955 42.3317 32.419 42.0823 32.9801 41.7706L40.399 44.8878L44.8878 40.399L41.7706 32.98C42.0199 32.419 42.3317 31.7955 42.581 31.2344L50 28.1172V21.8828L42.581 18.7656C42.394 18.2045 42.0823 17.581 41.7706 17.0199L44.8878 9.601L40.399 5.11222L32.9801 8.22943C32.419 7.98005 31.7955 7.66833 31.2344 7.41895L28.1172 0L21.8828 0ZM25 15.586C30.1746 15.586 34.3516 19.7631 34.3516 24.9377C34.3516 30.1122 30.1746 34.2893 25 34.2893C19.8254 34.2893 15.6484 30.1122 15.6484 24.9377C15.6484 19.7631 19.8254 15.586 25 15.586Z"
        fill="#D9D9D9"
      />
    </svg>
    <div class="sidetab_alt_text" id="sidetab_alt_text">
      <p>
        Welcome to T-Board,<br>{{ username }}!<br>Click the cog<br>for more detailed searches!
      </p>
      <svg
        width="184"
        height="71"
        viewBox="0 0 184 71"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
        >
        <g clip-path="url(#clip0_46_1085)">
          <path
          d="M0.772461 15.1608C0.772461 13.2942 1.70579 12.3608 3.57246 12.3608H25.6925C27.5591 12.3608 28.4925 13.2942 28.4925 15.1608V15.9308C28.4925 17.7975 27.5591 18.7308 25.6925 18.7308H20.6525C18.7858 18.7308 17.8525 19.6642 17.8525 21.5308V59.8211C17.8525 61.6877 16.9191 62.6211 15.0525 62.6211H14.2825C12.4158 62.6211 11.4825 61.6877 11.4825 59.8211V21.5308C11.4825 19.6642 10.5491 18.7308 8.68248 18.7308H3.57246C1.70579 18.7308 0.772461 17.7975 0.772461 15.9308V15.1608Z"
          fill="white"
          />
          <path
          d="M48.4408 39.031C48.4408 40.8977 47.5074 41.831 45.6406 41.831H32.6906C30.824 41.831 29.8906 40.8977 29.8906 39.031V37.981C29.8906 36.1143 30.824 35.181 32.6906 35.181H45.6406C47.5074 35.181 48.4408 36.1143 48.4408 37.981V39.031ZM75.4043 31.821C76.3376 32.7543 76.8043 33.8977 76.8043 35.251V55.4112C76.8043 56.7646 76.3376 57.9079 75.4043 58.8412L73.0943 61.1512C72.161 62.0846 71.0176 62.5512 69.6643 62.5512H56.8543C54.9876 62.5512 54.0543 61.6179 54.0543 59.7512V15.091C54.0543 13.2243 54.9876 12.291 56.8543 12.291H57.6243C59.491 12.291 60.4243 13.2243 60.4243 15.091V25.311C60.4243 27.1777 61.3576 28.111 63.2243 28.111H69.6643C71.0176 28.111 72.161 28.5777 73.0943 29.511L75.4043 31.821ZM63.2243 34.481C61.3576 34.481 60.4243 35.4143 60.4243 37.281V53.3812C60.4243 55.2479 61.3576 56.1812 63.2243 56.1812H67.6343C69.501 56.1812 70.4343 55.2479 70.4343 53.3812V37.281C70.4343 35.4143 69.501 34.481 67.6343 34.481H63.2243ZM105.281 31.751C106.214 32.731 106.681 33.8977 106.681 35.251V55.5512C106.681 56.9046 106.214 58.0712 105.281 59.0512L103.041 61.2912C102.107 62.2246 100.964 62.6912 99.6108 62.6912H90.9308C89.5774 62.6912 88.4341 62.2246 87.5008 61.2912L85.1908 58.9812C84.2574 58.0479 83.7908 56.9046 83.7908 55.5512V35.251C83.7908 33.8977 84.2574 32.7543 85.1908 31.821L87.5008 29.511C88.4341 28.5777 89.5774 28.111 90.9308 28.111H99.6108C100.964 28.111 102.107 28.5777 103.041 29.511L105.281 31.751ZM100.311 37.281C100.311 35.4143 99.3774 34.481 97.5108 34.481H92.9608C91.0941 34.481 90.1608 35.4143 90.1608 37.281V53.5212C90.1608 55.3879 91.0941 56.3212 92.9608 56.3212H97.5108C99.3774 56.3212 100.311 55.3879 100.311 53.5212V37.281ZM120.803 62.6213C119.45 62.6213 118.307 62.1546 117.373 61.2213L115.063 58.9112C114.13 57.9779 113.663 56.8346 113.663 55.4812V47.3612C113.663 46.661 113.78 46.0543 114.013 45.541C114.247 44.981 114.62 44.4443 115.133 43.931L117.373 41.691C118.307 40.7577 119.45 40.291 120.803 40.291H127.453C129.32 40.291 130.253 39.3577 130.253 37.491V37.281C130.253 35.4143 129.32 34.481 127.453 34.481H116.673C114.807 34.481 113.873 33.5477 113.873 31.681V30.911C113.873 29.0443 114.807 28.111 116.673 28.111H129.483C130.837 28.111 131.98 28.5777 132.913 29.511L135.224 31.821C136.157 32.7543 136.624 33.8977 136.624 35.251V59.8212C136.624 61.6879 135.69 62.6213 133.824 62.6213H120.803ZM130.253 48.8312C130.253 46.9643 129.32 46.031 127.453 46.031H122.833C120.967 46.031 120.033 46.9643 120.033 48.8312V54.0812C120.033 55.9479 120.967 56.8812 122.833 56.8812H127.453C129.32 56.8812 130.253 55.9479 130.253 54.0812V48.8312ZM151.427 59.8212C151.427 61.6879 150.494 62.6213 148.627 62.6213H147.857C145.99 62.6213 145.057 61.6879 145.057 59.8212V35.251C145.057 33.8977 145.524 32.7543 146.457 31.821L148.767 29.511C149.7 28.5777 150.844 28.111 152.197 28.111H153.457C155.324 28.111 156.257 29.0443 156.257 30.911V31.681C156.257 33.5477 155.464 34.481 153.877 34.481C153.084 34.481 152.477 34.7377 152.057 35.251C151.637 35.7177 151.427 36.3943 151.427 37.281V59.8212ZM164.13 29.511C165.063 28.5777 166.23 28.111 167.63 28.111H174.07C175.936 28.111 176.87 27.1777 176.87 25.311V15.231C176.87 13.3643 177.803 12.431 179.67 12.431H180.44C182.306 12.431 183.24 13.3643 183.24 15.231V59.8912C183.24 61.7579 182.306 62.6912 180.44 62.6912H167.63C166.276 62.6912 165.133 62.2246 164.2 61.2912L161.89 58.9812C160.956 58.0479 160.49 56.9046 160.49 55.5512V35.181C160.49 33.8277 160.956 32.6843 161.89 31.751L164.13 29.511ZM166.86 53.5212C166.86 55.3879 167.793 56.3212 169.66 56.3212H174.07C175.936 56.3212 176.87 55.3879 176.87 53.5212V37.281C176.87 35.4143 175.936 34.481 174.07 34.481H169.66C167.793 34.481 166.86 35.4143 166.86 37.281V53.5212Z"
          fill="#A2B7CA"
          />
        </g>
        <defs>
          <clipPath id="clip0_46_1085">
              <rect
              width="182.933"
              height="70"
              fill="white"
              transform="translate(0.533203 0.5)"
              />
          </clipPath>
        </defs>
      </svg>
    </div>
    <form action="/main_dashboard" method="POST" class="sidetab_filters" id="sidetab_filters">
      <div class="show-bookmark">
        <input type="checkbox" id="show-bookmarked" name="show-bookmarked" value="show-bookmarked" class="checkbox" onchange="this.form.submit()" {{ 'checked' if bookmark_checked else '' }}>
        <label for="show-bookmarked" class="show_bookmark_label">Show bookmarked events</label><br>
      </div>
      <div class = "apply_filter">
        <input class="checkbox" type="checkbox" id="filter_club" name="filter" value="Club" onchange="this.form.submit()"  {{ 'checked' if event_types_checked[2] else '' }}>
        <label class="show_filter_label" for="filter">Club</label>
        <input class="checkbox" type="checkbox" name="filter" value="Networking" onchange="this.form.submit()"  {{ 'checked' if event_types_checked[3] else '' }}>
        <label class="show_filter_label" for="filter">Networking</label><br>
        <input class="checkbox" type="checkbox" name="filter" value="Sports" onchange="this.form.submit()"  {{ 'checked' if event_types_checked[1] else '' }}>
        <label class="show_filter_label" for="filter">Sports</label>
        <input class="checkbox" type="checkbox" name="filter" value="Tutoring" onchange="this.form.submit()"  {{ 'checked' if event_types_checked[0] else '' }}>
        <label class="show_filter_label" for="filter">Tutoring</label><br>
        <input class="checkbox" type="checkbox" name="filter" value="Other" onchange="this.form.submit()"  {{ 'checked' if event_types_checked[4] else '' }}>
        <label class="show_filter_label" for="filter">Other</label>
      </div>
      <div class="sort">
        <label for="sort-by" class="sort-by">Sort by:</label>
        <select id="sort-by" name="sort-by" class="dropdown" onchange="this.form.submit()">
          <option value="None" {% if sort_by == 'None' %}selected{% endif %}>None</option>
          <option value="asc-alphabetic" {% if sort_by == 'asc-alphabetic' %}selected{% endif %}>A to Z</option>
          <option value="desc-alphabetic" {% if sort_by == 'desc-alphabetic' %}selected{% endif %}>Z to A</option>
          <option value="asc-date" {% if sort_by == 'asc-date' %}selected{% endif %}>Oldest to Newest</option>
          <option value="desc-date" {% if sort_by == 'desc-date' %}selected{% endif %}>Newest to Oldest</option>
        </select>
      </div>
    </form>
  </div>
</div>

<script>
  function toggleSidetab() {
    const form = document.getElementById('sidetab_filters');
    const alt_text = document.getElementById('sidetab_alt_text');
    if (form.style.display === 'none' || form.style.display === '') {
      form.style.display = 'block';
      alt_text.style.display = 'none';
    } else {
      form.style.display = 'none';
      alt_text.style.display = 'block';
    }
  }
</script>

{% include "base_event.html" %}
<style>
.dashboard {
  padding: 0px 25px 0px 25px;
  display: flex;
  flex-direction: row;
  gap: 25px;
  align-items: stretch;
  justify-content: center;
  position: relative;
  width: 100%;
}
.frame {
  background: #786554;
  position: relative;
  padding: 20px 20px 20px 20px;
  overflow: visible;
  width: 1080px;
}
.board {
  background: #d9d9d9;
  position: relative;
  box-shadow: inset 0px 4px 4px 0px rgba(0, 0, 0, 0.25);
  height: 100%;
}
.error {
  font: 400 30px "Ubuntu Condensed", sans-serif;  
  align-self: stretch;
  justify-self: stretch;
}
.sidetab {
  padding: 60px 0px 60px 0px;
  display: fixed;
  flex-direction: column;
  gap: 43px;
  align-items: flex-start;
  justify-content: flex-start;
  align-self: stretch;
  flex-shrink: 0;
  position: relative;
  width: 300px;
  height: 350px;
  background-color: gray;
  border-radius: 10px;
  padding: 20px;
}
.sidetab_alt_text {
  display: block;
  font: 400 20px "Ubuntu Mono", sans-serif;
  color: white;
  line-height: 1.25;
  margin-bottom: 30px;
}
.sidetab_alt_text svg { /*this function is written with the help of chatgpt.*/
  display: inline-block;
  margin-left: 30px;
  align-items: center;
}
.sidetab_alt_text p { /*this function is written with the help of chatgpt.*/
  text-align: left;
}
.sidetab_filters {
  display: none;
}
.show-bookmark {
  display: flex;
  flex-direction: row;
  width: 240px;
  justify-content: space-between;
  align-items: center;
  margin-top: 20px;
  margin-bottom: 20px;
}
.checkbox {
  background: #d9d9d9;
  width: 20px;
  height: 20px;
  position: relative;
}
.show_bookmark_label {
  color: #ffffff;
  text-align: center;
  font: 400 17px "Ubuntu Mono", sans-serif;
  width: 200px;
  position: relative;
  display: inline-flex;
}
.show_filter_label {
  color: white;
  text-align: center;
  font: 400 17px "Ubuntu Mono", sans-serif;
  width: 90px;
  position: relative;
  display: inline-flex;
}
.icon-check {
  position: absolute;
  left: 4px;
  top: 69px;
  overflow: visible;
}
.sort {
  display: flex;
  flex-direction: column;
  margin-bottom: 30px;
  gap: 10px;
}
.dropdown {
  text-align: left;
  font: 400 24px "Ubuntu Mono", sans-serif;
  position: relative;
}
.sort-by {
  color: #ffffff;
  text-align: left;
  font: 400 24px "Ubuntu Mono", sans-serif;
  position: relative;
}
.icon-cog {
  flex-shrink: 0;
  position: relative;
  overflow: visible;
}
.apply_filter {
  color: white;
  text-align: left;
  font: 400 12px "Ubuntu Mono", sans-serif;
  position: relative;
  margin-bottom: 20px;
}
</style>
{% endblock %}